# 函数、随机数函数、定时器、时间函数、字符串函数

***

## 函数

函数：实现某个功能的代码块

作用：1. 提高代码利用率。2. 分隔作用域。3. 防止命名冲突。4. 释放内存

### 声明

```js
function test(){
  console.log("...");
}
```

### 调用

* 无参

  ```js
  test();
  ```

* 有参

  ```js
  function add(a,b){
    return {a,b};
  }

  ```

  a,b是形参数，50,100是实参

  ```js
  var x = add(50,100);
  ```

* `arguments` 函数内置数组

  1. 当形参和实参数量不匹配 可以不写形参 直接通过 `arguments` 接收参数
  2. 当参数较多 可以使用 `arguments` 接收参数

  ```js
  function sum(a,b,c,d){
    console.log(arguments);
    var sum = 0;
    for(var i = 0; i < arguments.length; i++){
      sum = sum + arguments[i];
    }
    return sum;
  }
  console.log(sum(2,3,4,5,6,7););
  ```

### 作用域

* 变量在函数内声明，变量为局部变量，具有局部作用域。

  局部变量：只能在函数内部访问。

  ```js
  // 此处不能调用 carName 变量
  function myFunction() {
      var carName = "Volvo";
      // 函数内可调用 carName 变量
  }
  ```

* 变量在函数外定义，即为全局变量，具有全局作用域。

  全局变量：网页中所有脚本和函数均可使用

  ```js
  var carName = " Volvo";
  // 此处可调用 carName 变量
  function myFunction() {
    // 函数内可调用 carName 变量
  }
  ```



## Math方法

* 取绝对值 `Math.abs(x)`
* 返回x的y次幂 `Math.pow(x,y)`
* 返回x的算数平方根 `Math.sqrt(x)`
* 返回几个数的算术平方根 `Math.max(x,y,...)`
* 返回几个数中的最小值 `Math.min(x,y,...)`
* 四舍五入取整 `Math.round(x.xx)`
* 向上取整 `Math.ceil(x.xx)`
* 向下取整 `Math.floor(x.xx)`
* 随机数 取 `0-1` 之间的小数 `Math.randow()`
* 取整(向下取整) `parseInt(x.xx)`

### 随机数

取两个数之间的随机整数

```js
function getRandom(max,min){
  return Math.floor(Math.random()*(max-min+1)+min);
}
```

```js
function getRandom(max,min){
  return Math.round(Math.random()*(max-min)+min);
}
```

### 随机变色

```js
box.style.backgroundColor="rgb("+getRandom(0,255)+','+getRandom(0,255)+','+getRandom(0,255)+')';
```



## 定时器

`callback` : 回调函数 把函数当作一个参数传到另一个函数中

`setInterval(callback,time)` 每隔固定时间代码执行一次

```js
var time1=setInterval(function(){
  console.log("Hello World");
},1000);
```

`setTimeout(callback,time)` 延迟固定时间执行一次 只执行一次

```js
setTimeout(function(){
  alert("hello 我不吃");
},2000);
```

`clearInterval(time)` 移除定时器

```js
clearInterval(time1);
```

### 随机抽取

```js
<script>
    var num = document.getElementsByTagName('div');
    var btn = document.getElementsByTagName('button')[0];

    function fun() {
        for (var i = 0; i < num.length; i++) {
            num[i].innerHTML = `${Math.round(Math.random() * 10)}`
        }
    }
    fun();
    var time;

    var flag = 0;
    btn.onclick = function () {
        flag++;
        if (flag == 1) {
            time = setInterval(function () {
                fun();
            }, 50);
        }
        setTimeout(function(){
            flag = 0;
            clearInterval(time);
        },1000);
    }
</script>
```



## 时间

JS脚本内置了Date对象，该对象为我们提供了一些列操作时间和日期的方法。

***

* 创建时间对象

  1. 不传参  获取的是当前的时间

  2. 可以传参 获取的是指定的时间

     字符串`"2022-8-23 00:00:00"` 

     数字 `2022, 7, 23`表示 `2022-08-23` 月份的取值范围[0-11]

  ```js
  var date = new Date();
  ```

  ```js
  var date = new Date('2023-1-21 00:00:00');
  ```

* 获取年 `getFullYear()`

  ```js
  var year=date.getFullYear();
  ```

* 获取月 `getMoth()`

  ```js
  var month=date.getMonth();
  ```

* 获取日 `getDate()`

  ```js
  var day=date.getDate();
  ```

* 获取周几 `getDay()`

  ```js
  var w=date.getDay();
  ```

* 获取时、分、秒 `getHours()` 、 `getMinutes()` 、 `getSeconds()`

  ```js
  var h=date.getHours();
  var m=date.getMinutes();
  var s=date.getSeconds();
  ```

* 获取时间戳 `getTime()`

  获取距离1970.1.1的毫秒数

  ```js
  var ss=date.getTime();
  ```

### 距离某天的时间

距离春节时间

* 先计算出 `当天` 和 `某天`的时间戳
* 然后得到 `当天` 距离 `某天` 的毫秒数
* 将毫秒数转化为秒
* 然后通过秒数计算出天、小时、分、秒

```js
var t=document.querySelector('p');
function sett(){
  var date1 = new Date();
  var date2 = new Date('2023-1-21 00:00:00');
  var date1_ss =date1.getTime();
  var date2_ss =date2.getTime();
  var numS=Math.floor((date2_ss-date1_ss)/1000);
  var s=numS%60;
  var m=(numS-s)%(3600);
  var h=(numS-s-m)%(3600*24);
  var d=(numS-s-m-h);
  // console.log(numS,d/(3600*24),h/3600,m/60,s);
  t.innerHTML=(`${d/(3600*24)}天${h/3600}小时${m/60}分${s}秒`)
}
time1=setInterval(function(){
  sett();
},1000)
```



## 数组

* 将数组分隔为字符串 `join()`

  可以传参数















