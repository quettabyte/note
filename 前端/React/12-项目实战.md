# 全球新闻发布管理系统

B站千峰Kerwin老师React项目实战👍

## 准备工作

### 需要的模块

*   sass: `npm i --save sass`
*   axios: `npm i --save axios`
*   http-proxy-middleware: `npm i --save http-proxy-middleware`
*   react-router: `npm i --save react-router-dom@5`
*   antd: `npm i --save antd`

### 路由结构

<img src="https://lnfeng-pic.oss-cn-wulanchabu.aliyuncs.com/web-note/react/2024-5-17-23-34-18.png" alt="2024-5-17-23-34-18.png" style="zoom: 67%;" />

### json-server

> 用来模拟后端。

安装 `json-server`

```shell
npm install -g json-server
```

创建 `db.json`

```shell
npx json-server --watch .\db.json --port 8000
```

前端操作数据

```js
// 取数据 get
axios.get("http://localhost:8000/posts/2").then(res => {
	console.log(res.data)
})
// 增 post
axios.post("http://localhost:8000/posts",{
  tit1e:"33333",
  author:"xiaoming"
})
// 修改 会直接替换之前id为1的数据，会丢一些字段
axios.put("http://localhost:8000/posts/1",{
	tit1e:"1111-修改"
})
// 更新 patch 局部更新，不会丢掉id为1里其他字段的数据
axios.path("http://localhost:8000/posts/1",{
  tit1e:"1111-修改-1111"
})
// 删除 
axios.delete("http://localhost:8000/posts/1")
```

## 开始

### 封装路由模块

在 `📂src` ——`📂router` ——`📄IndexRouter.js`

```jsx
export default function IndexRouter() {
  return (
    <HashRouter>
      <Switch>
        <Route path="/login" component={Login} />
        <Route path="/" render={() => {
            // 没有token——重定向到Login组件
            // 有token——重定向到NewsSandBox组件
            localStorage.getItem("token") ?
              <NewsSandBox></NewsSandBox> :
              <Redirect to="/login"></Redirect>
        }} />
      </Switch>
    </HashRouter>
  )
}
```

