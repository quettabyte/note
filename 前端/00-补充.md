# 补充知识

## 常用符号

| 符号   | 代码    |
| ------ | ------- |
| 空格   | \&nbsp; |
| &copy; | \&copy; |

## 数组和字符串


|         |       数组       |   字符串   |
| :-----: | :--------------: | :--------: |
|  slice  |     截取数组     | 截取字符串 |
| splice  | 删除、添加、替换 |            |
| replace |                  |    替换    |
|  split  |                  | 分隔为数组 |
|  join   |   分割为字符串   |            |

## this

this指向函数的拥有者

回调函数的this指向window

## overflow

`hidden` 超出父元素的部分隐藏 应用：解决塌陷问题

`scrool` 超出父元素的部分以滚动条显示

`overflow-x: hidden` x方向隐藏 y方向以滚动条显示

`overflow-y: hidden` y方向隐藏 x方向以滚动条显示

## 浏览器嗅探

`navigator.userAgent` 判断浏览器的很多信息

## 存储

* `localStorage` 本地存储

  1. 数据存储在本地
  2. 需要手动删除
  3. 存储量大
  4. 只能存储基本数据类型

  ```js
  //=================localStorage===================
  // 写法1
  localStorage.setItem(key,value);
  localStorage.removeItem(key);
  localStorage.has(key); // 查找
  // 写法2
  localStorage.key = value;
  localStorage.key = null;
      
  // 清空所有数据
  localStorage.clear();
  ```

* `sessionStorage` 会话存储

  1. 数据依赖浏览器
  2. 当页面关闭或者推出浏览器时清空数据
  3. 存储量大

* `cookie` 

  1. 可以为数据设置过期时间
  2. 可以与后台共用
  3. 存储量小

## JSON

* JSON是一种特殊格式的字符串

* 可以与数组、对象进行转换

* 常用于前后端数据交互、文件配置说明

* JSON格式

  ```json
  {
      "a": 1,
      "name": "cege"
  }
  ```

* `JSON.parse()`JSON字符串->数组

  ```js
  var arr = JSON.parse(localStorage.phb);
  ```

* `JSON.stringify()` 数组->JSON字符串

  ```js
  localStorage.phb = JSON.stringify(arr);
  ```

## 浏览器窗口大小发生变化事件

```js
window.onresize = function(){
}
```

## 关键字

#### instanceof

查看对象是否是某类型的实例化

```js
let stu = {
    name: 'zhangsan',
    age: '18',
};
console.log(arr instanceof Object);
// 打印结果
// true
```

## 展开运算符

在原生JS里不能直接展开一个对象

```js
let person = {name:'tom',age:18}
console.log(...person); //报错，展开运算符不能展开对象
```

可以构造字面量对象时使用展开语法（==深拷贝==）

```js
let person = {name:'tom',age:18}
let person2 = {...person}
```

在React中可以直接展开一个对象，但是只允许在标签传递属性时使用

```jsx
ReactDOM.render(<Person{...p}/>,document.getElementById('container'));
```

## 弹窗（确认、取消）

```js
if(window.confirm('确定删除吗？')){
    //执行删除
} 
```

---

# 常用方法

## 随机数

```js
function rand(min,max){
  return Math.floor(Math.random()*(max-min+1)+min);
}
```

```js
function rand(min,max){
  return Math.round(Math.random()*(max-min)+min);
}
```

## 数组去重

**方法1**

```js
var numArr=[99,45,89,45,99,99,23,56,0,2,0];
for(var i=0;i<numArr.length;i++){
    for(var j=i+1;j<numArr.length;j++){
        if(numArr[i]===numArr[j]){
            numArr.splice(j,1);
            j--;
        }
    }
}
```

**方法2**

```js
var numArr=[99,45,89,45,99,99,23,56,0,2,0];
var arr=[];
for(var i=0;i<numArr.length;i++){
    if(!arr.includes(numArr[i])){
        arr.push(numArr[i]);
    }
}
```

**方法3**

```js
var numArr=[99,45,89,45,99,99,23,56,0,2,0];
var arr=new Set(numArr);
console.log(arr);
```

**方法4**面向对象写法 `（面试）`

```js
Array.prototype.SingleArr = function() {
    var newArr = [];
    this.forEach(function(item) {
        newArr.indexOf(item) === -1 ? newArr.push(item) : null;
    })
    return newArr;
}
```

## 反转字符串

```js
var newStr='hello world';
function reverseString(str) {
    return str.split('').reverse().join('');
}
newStr = reverseString(newStr);
```

面向对象写法

```js
var newStr='hello world';
String.prototype.reverseStr = function() {
    return this.split('').reverse().join('');
}
newStr = newStr.reverseStr();
```

## 打印时间

**距离某天倒计时**

```js
function sett(time){
    var date1 = new Date();
    var date2 = new Date(time);
    var date1_ss =date1.getTime();
    var date2_ss =date2.getTime();
    var numS=Math.floor((date2_ss-date1_ss)/1000);
    var s=numS%60;
    var m=(numS-s)%(3600);
    var h=(numS-s-m)%(3600*24);
    var d=(numS-s-m-h);
    // console.log(numS,d/(3600*24),h/3600,m/60,s);
    return (`${d/(3600*24)}天${h/3600}小时${m/60}分${s}秒`)
}
```

**打印当前时间**

```js
function gettime(){
    var date=new Date();
    var year=date.getFullYear();
    var month=date.getMonth()+1;
    month=month<10?"0"+month:month;
    var day=date.getDate();
    day=day<10?"0"+day:day;
    var week="日一二三四五六".charAt(date.getDay());
    var hour=date.getHours();
    hour=hour<10?"0"+hour:hour;
    var minute=date.getMinutes();
    minute=minute<10?"0"+minute:minute;
    var second=date.getSeconds();
    second=second<10?"0"+second:second;
    return (year+"-"+month+"-"+day+" 星期"+week+" 时间"+hour+":"+minute+":"+second);
}
```

## 判断是否是移动端

```js
function isPhone() {
    var arr = ["iPhone", "iPad", "Android"];
    for (var i = 0; i < arr.length; i++) {
        if (navigator.userAgent.includes(arr[i])) {
            return true;
        }
    }
    return false;
}
```

## 碰撞检测

```js
function isCrash(a, b) {
    var l1 = a.offsetLeft;
    var t1 = a.offsetTop;
    var r1 = l1 + a.offsetWidth;
    var b1 = t1 + a.offsetHeight;
    var l2 = b.offsetLeft;
    var t2 = b.offsetTop;
    var r2 = l2 + b.offsetWidth;
    var b2 = t2 + b.offsetHeight;
    if (r2 < l1 || b2 < t1 || r1 < l2 || b1 < t2) {
        // 不碰撞
        return false;
    } else {
        // 碰撞
        return true;
    }
}
```


## 响应式判断

```css
@media screen and (min-width: 968px) {
    /* pc */
    #alert_user {
        display: block;
    }
    .container {
        display: none;
    }
}

```

## 数组求和

```js
function sum(...numbers) {
    return numbers.reduce((preValue,currentValue) => {
        return preValue + currentValue
    })
}
console.log(sum(1,2,3,4));
```

---

# JS排序

## 冒泡排序

```js
Array.prototype.paixu = function () {
    let tmp;
    for (var i = 0; i < this.length-1; i++) {
        for (var j = 0; j < this.length-i-1; j++) {
            if (this[j] < this[j + 1]) {
                tmp = this[j];
                this[j] = this[j + 1];
                this[j + 1] = tmp;
            }
        }
    }
    return this;
}
```

## 选择排序

```js
Array.prototype.paixu = function () {
    for (var i = 0; i < this.length-1; i++) {
        let tmp = i;
        for (var j = i+1; j < this.length; j++) {
            if (this[j] < this[tmp]) {
                tmp = j;
            }
        }
        let y = this[i];
        this[i] = this[tmp];
        this[tmp] = y;
    }
    return this;
}
```

