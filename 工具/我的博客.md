# 我的博客

## 结构简介

Hexo是一款基于Node.js的静态博客框架，依赖少易于安装使用，可以方便的生成静态网页托管在GitHub和Coding上，是搭建博客的首选框架。

采用的博客主题是`Hexo Fluid`

> [Hexo官网](https://hexo.io/zh-cn/)
>
> [Hexo Fluid 用户手册 (fluid-dev.com)](https://hexo.fluid-dev.com/docs/)

源码在Github上托管：[Github@quettabyteBlogSrc](https://github.com/quettabyte/quettabyteBlogSrc)，并在Gitee镜像备份[Gitee@quettabyteBlogSrc](https://gitee.com/quettabyte/quettabyteBlogSrc)，在push到Github仓库后，会触发`Github Action`强制镜像到Gitee。

静态网站仓库同样在Github上托管，并镜像到Gitee。

## 怎么使用

### 1、安装node.js	

在[node.js官网](https://nodejs.org/en)下载LTS版本（稳定版本）一直下一步完成安装、

<img src="https://lnfeng-pic.oss-cn-wulanchabu.aliyuncs.com/tools-note/2024-5-18-00-25-09.png" alt="2024-5-18-00-25-09.png" style="zoom: 67%; margin-Left: 0" />

```
$ node -v
v18.16.0

$ npm -v
9.5.1
```

### 2、全局安装Hexo

```
$ npm config set registry https://registry.npmmirror.com

$ npm install hexo -g
```

### 3、克隆源码

克隆Github上的源码

```
$ git clone https://github.com/quettabyte/quettabyteBlogSrc.git
```

### 4、安装依赖模块

`node_modules/`依赖模块在上传git仓库时是忽略的，因为这些文件特别多，所以在`.gitignore`文件中忽略掉了。

那么每次clone代码后需要重新安装依赖模块。

在博客目录下执行

```
$ npm install -S
```

### 5、测试

执行`hexo server`测试

# 从零搭建Hexo

### 第一步：安装环境

1. 安装node.js
2. 安装git

### 熟悉npm

npm在安装模块时分为`全局`和`局部`安装。

> 为什么要分全局和局部：
>
> 因为全局包如果被多个项目依赖，那么每次包的升级、更新等就会影响你的多个项目，那么依赖关系就会被破坏，所以使用本地安装有利于不同项目之间的独立性。

* 全局（--global）：`npm install hexo -g`

  ```
  是安装在AppData目录下
  C:\Users\Administrator.PC\AppData\Roaming\npm\node_modules目录下。
  ```

* 局部（--save）：`npm install hexo -S`

  安装在执行命令的目录下的node_modules/目录下

  ```
  并将其添加到 package.json 的 dependencies。
  dependencies依赖的包不仅开发环境能使用，生产环境也能使用。
  {
    "dependencies": {
      "hexo": "^7.2.0"
    }
  }
  ```

* 局部（--save-dev）：`npm install hexo -D`

  安装在执行命令的目录下的node_modules/目录下

  ```
  并将其添加到 package.json 的 devDependencies。
  devDependencies是只会在开发环境下依赖的模块，生产环境不会被打入包内。
  {
    "devDependencies": {
      "hexo": "^7.2.0"
    }
  }
  ```

* 特定版本安装：`npm install <package>@<version>`

### 第二步：安装Hexo

```shell
$ npm install hexo -g
```

### 第三步：初始化

```shell
$ hexo init ./quettabyteBlogSrc
```

### 第四步：安装主题

```
$ npm install -S hexo-theme-fluid
```

### 第五步：编辑配置文件

在博客目录下创建 `_config.fluid.yml`，将主题的`_config.yml(node_modules/hexo-theme-fluid/_config.yml)`内容复制过去。

如下修改 Hexo 博客目录中的 `_config.yml`：

```yaml
theme: fluid  # 指定主题

language: zh-CN  # 指定语言，会影响主题显示的语言，按需修改
```

### 命令

#### generate

```
$ hexo generate
```

生成静态文件。

| 选项                  | 描述                                                         |
| :-------------------- | :----------------------------------------------------------- |
| `-d`, `--deploy`      | 文件生成后立即部署网站                                       |
| `-w`, `--watch`       | 监视文件变动                                                 |
| `-b`, `--bail`        | 生成过程中如果发生任何未处理的异常则抛出异常                 |
| `-f`, `--force`       | 强制重新生成文件 Hexo 引入了差分机制，如果 `public` 目录存在，那么 `hexo g` 只会重新生成改动的文件。 使用该参数的效果接近 `hexo clean && hexo generate` |
| `-c`, `--concurrency` | 最大同时生成文件的数量，默认无限制                           |

该命令可以简写为

```
$ hexo g
```

#### server

```
$ hexo server
```

启动服务器。默认情况下，访问网址为： `http://localhost:4000/`。

| 选项             | 描述                           |
| :--------------- | :----------------------------- |
| `-p`, `--port`   | 重设端口                       |
| `-s`, `--static` | 只使用静态文件                 |
| `-l`, `--log`    | 启动日记记录，使用覆盖记录格式 |

#### deploy

```
$ hexo deploy
```

部署网站。

| 参数               | 描述                     |
| :----------------- | :----------------------- |
| `-g`, `--generate` | 部署之前预先生成静态文件 |

该命令可以简写为：

```
$ hexo d
```

Hexo 提供了快速方便的一键部署功能，让您只需一条命令就能将网站部署到服务器上。

```
$ hexo deploy
```

在开始之前，您必须先在 `_config.yml` 中修改参数，一个正确的部署配置中至少要有 `type` 参数，例如：

```
deploy:
  type: git
```

您可同时使用多个 deployer，Hexo 会依照顺序执行每个 deployer。

```
deploy:
- type: git
  repo: https://github.com/quettabyte/quettabyte.github.io.git
  branch: [main]
- type: git
  repo: https://gitee.com/quettabyte/quettabyte.git
  branch: [main]
```

同时部署到`Github`和`Gitee`上

# Hexo文章常用

| `layout`          | 布局                                                         | [`config.default_layout`](https://hexo.io/zh-cn/docs/configuration#文章) |
| ----------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| `title`           | 标题                                                         | 文章的文件名                                                 |
| `date`            | 建立日期                                                     | 文件建立日期                                                 |
| `updated`         | 更新日期                                                     | 文件更新日期                                                 |
| `comments`        | 开启文章的评论功能                                           | `true`                                                       |
| `tags`            | 标签（不适用于分页）                                         |                                                              |
| `categories`      | 分类（不适用于分页）                                         |                                                              |
| `permalink`       | 覆盖文章的永久链接，永久链接应该以 `/` 或 `.html` 结尾       | `null`                                                       |
| `excerpt`         | 纯文本的页面摘要。使用 [该插件](https://hexo.io/zh-cn/docs/tag-plugins#文章摘要和截断) 来格式化文本 |                                                              |
| `disableNunjucks` | 启用时禁用 Nunjucks 标签 `{{ }}`/`{% %}` 和 [标签插件](https://hexo.io/zh-cn/docs/tag-plugins) 的渲染功能 | false                                                        |
| `lang`            | 设置语言以覆盖 [自动检测](https://hexo.io/zh-cn/docs/internationalization#路径) | 继承自 `_config.yml`                                         |
| `published`       | 文章是否发布                                                 | 对于 `_posts` 下的文章为 `true`，对于 `_draft` 下的文章为 `false` |
| `hide`            | 隐藏文章,不在首页和其他归档分类页里展示                      | true                                                         |
| `archive`         | 首页隐藏,但仍需要在归档分类页里展示                          | true                                                         |
| `sticky`          | `sticky` 数值越大，该文章越靠前，达到类似于置顶的效果，其他未设置的文章依然按默认排序。当文章设置了 `sticky` 后，主题会默认在首页文章标题前增加一个图标，来标识这是一个置顶文章，你可以通过主题配置去关闭或修改这个功能。`icon` 可以通过[自定义图标](https://hexo.fluid-dev.com/docs/icon/)修改为其他图标。 | 100                                                          |
| `index_img`       | 文章在首页的封面图                                           | index_img: /img/example.jpg                                  |
| `banner_img`      | 文章页顶部大图                                               | banner_img: /img/post_banner.jpg                             |