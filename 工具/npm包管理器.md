# npmåŒ…ç®¡ç†å™¨

## å›½å†…æ·˜å®é•œåƒ

### å‘½ä»¤è¡Œæ°¸ä¹…æ›´æ”¹ä½¿ç”¨æŒ‡å®šé•œåƒï¼ˆæ·˜å®ï¼‰

```shell
$ npm config set registry https://registry.npmmirror.com
```

### ä½¿ç”¨æ·˜å® NPM

> npmæ˜¯nodeå®˜æ–¹çš„åŒ…ç®¡ç†å™¨ã€‚cnpmæ˜¯ä¸ªä¸­å›½ç‰ˆçš„npmï¼Œæ˜¯æ·˜å®å®šåˆ¶çš„ cnpm (gzip å‹ç¼©æ”¯æŒ) å‘½ä»¤è¡Œå·¥å…·ä»£æ›¿é»˜è®¤çš„ npmã€‚
>
> å¦‚æœå› ä¸ºç½‘ç»œåŸå› æ— æ³•ä½¿ç”¨npmä¸‹è½½ï¼Œé‚£cnpmè¿™ä¸ªå°±æ´¾ä¸Šç”¨åœºäº†ã€‚
>
> ä¸€å®šåˆ‡è®°åˆ‡è®°ï¼Œnpmå’Œcnpmåªæ˜¯ä¸‹è½½çš„åœ°å€ä¸åŒï¼Œnpmæ˜¯ä»å›½å¤–ä¸‹è½½ä¸œè¥¿ï¼Œcnpmæ˜¯ä»å›½å†…ä¸‹è½½ä¸œè¥¿ã€‚
>
> æ¥è‡ªæ·˜å®NPMé•œåƒå®˜ç½‘çš„è¯´æ˜ï¼š
>
> è¿™æ˜¯ä¸€ä¸ªå®Œæ•´ npmjs.org é•œåƒï¼Œä½ å¯ä»¥ç”¨æ­¤ä»£æ›¿å®˜æ–¹ç‰ˆæœ¬(åªè¯»)ï¼ŒåŒæ­¥é¢‘ç‡ç›®å‰ä¸º 10åˆ†é’Ÿ ä¸€æ¬¡ä»¥ä¿è¯å°½é‡ä¸å®˜æ–¹æœåŠ¡åŒæ­¥ã€‚

```shell
$ npm install -g cnpm --registry=https://registry.npm.taobao.org

$ cnpm install xxxxx
```

### æŸ¥çœ‹ç›®å‰ä½¿ç”¨çš„npmé•œåƒ

```shell
$ npm config get registry
```

## åŸºæœ¬æ“ä½œ

### æŸ¥çœ‹ç‰ˆæœ¬

```shell
$ npm -v
```

### æŠŠxxxæ¨¡å—ä¸‹è½½åˆ°å½“å‰ç›®å½•ä¸‹

```shell
$ npm install xxx

# ç®€å†™
$ npm i xxx
```

### ä¸‹è½½æ–¹å¼

```shell
# å…¨å±€
$ npm install xxx -g
    
# å±€éƒ¨ ï¼Œç”Ÿäº§ç¯å¢ƒ
$ npm i xxx -S 
$ npm install xxx --save

# å±€éƒ¨ ï¼Œå¼€å‘ç¯å¢ƒ
$ npm i xxx -D 
$ npm install xxx --save-dev
```

> æ³¨æ„ï¼š-Dï¼Œ-S åˆ†åˆ«æ˜¯ --save-devå’Œ --saveçš„ç®€å†™ï¼Œé»˜è®¤å°±æ˜¯ -Sï¼Œå¯ä»¥çœç•¥ä¸å†™
>
> ---
>
>  npm i module_name -S    
>
> è¿™æ ·å®‰è£…æ˜¯å±€éƒ¨å®‰è£…çš„ï¼Œä¼šå†™è¿›package.jsonæ–‡ä»¶ä¸­çš„dependencieé‡Œã€‚
>
> dependenciesï¼š è¡¨ç¤ºç”Ÿäº§ç¯å¢ƒä¸‹çš„ä¾èµ–ç®¡ç†ï¼›
>
> è¯´ç™½äº†ä½ å®‰è£…ä¸€ä¸ªåº“å¦‚æœæ˜¯ç”¨æ¥æ„å»ºä½ çš„é¡¹ç›®çš„ï¼Œæ¯”å¦‚echartsã€element-uiï¼Œæ˜¯å®é™…åœ¨é¡¹ç›®ä¸­èµ·ä½œç”¨ï¼Œå°±å¯ä»¥ä½¿ç”¨ -s æ¥å®‰è£…ã€‚
>
> ---
>
> npm i module_name -D   
> è¿™æ ·å®‰è£…æ˜¯å±€éƒ¨å®‰è£…çš„ï¼Œä¼šå†™è¿›package.jsonæ–‡ä»¶ä¸­çš„devDependencies é‡Œã€‚
>
> devDependencies ï¼šè¡¨ç¤ºå¼€å‘ç¯å¢ƒä¸‹çš„ä¾èµ–ç®¡ç†ï¼›
>
> å¦‚æœä½ å®‰è£…çš„åº“æ˜¯ç”¨æ¥æ‰“åŒ…çš„ã€è§£æä»£ç çš„ï¼Œæ¯”å¦‚webpackã€babelï¼Œå°±å¯ä»¥ç”¨ -d æ¥å®‰è£…ï¼Œé¡¹ç›®ä¸Šçº¿äº†ï¼Œè¿™äº›åº“å°±æ²¡ç”¨äº†ï¼Œä¸ç„¶ç•™è¿™äº›åº“ç»™ç”¨æˆ·è‡ªå·±æ¥æ‰“åŒ…å’Œè§£æä»£ç å˜›ã€‚

ğŸˆ npmå®‰è£…æ¨¡å—

* ã€npm install xxxã€‘åˆ©ç”¨ npm å®‰è£…xxxæ¨¡å—åˆ°å½“å‰å‘½ä»¤è¡Œæ‰€åœ¨ç›®å½•ï¼›

* ã€npm install -g xxxã€‘åˆ©ç”¨npmå®‰è£…å…¨å±€æ¨¡å—xxxï¼›

* ã€npm install xxxã€‘å®‰è£…ä½†ä¸å†™å…¥package.jsonï¼›

* ã€npm install xxx â€“saveã€‘ å®‰è£…å¹¶å†™å…¥package.jsonçš„â€dependenciesâ€ä¸­ï¼›

* ã€npm install xxx â€“save-devã€‘å®‰è£…å¹¶å†™å…¥package.jsonçš„â€devDependenciesâ€ä¸­ã€‚

ğŸˆ npm åˆ é™¤æ¨¡å—

* ã€npm uninstall/remove  xxx ã€‘åˆ é™¤xxxæ¨¡å—ï¼›
* ã€npm uninstall/remove  -g xxxã€‘åˆ é™¤å…¨å±€æ¨¡å—xxxï¼›



## åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®

```shell
$ npm init
```

*   ä¸€ä¸ªé¡¹ç›®çº¢å¯ä»¥æ²¡æœ‰ `node_moduls` ä½†æ˜¯ä¸èƒ½æ²¡æœ‰ `package.json`(é¡¹ç›®çš„æè¿°æ–‡ä»¶)

*   æ‰§è¡Œ `npm install` å¯ä»¥è‡ªåŠ¨ä¸‹è½½ `package.json`  ä¸­çš„æ‰€ç”¨åˆ°çš„æ¨¡å—

### package.jsonå’Œpackage-lock.json

* **package.json**æ˜¯é€šè¿‡npm initåˆ›å»ºæ—¶ç”Ÿæˆçš„ï¼Œpackage.jsonæ–‡ä»¶ä¸­ä¼šè®°å½•é¡¹ç›®ä¸­æ‰€éœ€è¦çš„æ¨¡å—ã€‚è®°å½•çš„åªæ˜¯æ¯ä¸ªæ¨¡å—çš„åŸºæœ¬ä¿¡æ¯ã€‚æ¨¡å—åç§°å’Œå¤§ç‰ˆæœ¬ä¿¡æ¯ã€‚

* åœ¨ä½¿ç”¨npm installçš„æ—¶å€™ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª**package-lock.json**çš„æ–‡ä»¶ï¼Œpackage-lock.jsonæ–‡ä»¶åˆ™ä¼šè®°å½•æ¯ä¸ªæ¨¡å—çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚æ¨¡å—çš„å…·ä½“ç‰ˆæœ¬å·å’Œå„ä¸ªæ¨¡å—æ‰€ä¾èµ–çš„å­æ¨¡å—çš„ä¿¡æ¯ã€‚

* **npm install**çš„è¿‡ç¨‹å¤§è‡´å°±æ˜¯ä»package.jsonä¸­è¯»å–æ‰€æœ‰çš„ä¾èµ–ä¿¡æ¯ï¼Œç„¶åå†ä¸node_modulesä¸­å·²ç»å®‰è£…çš„ä¾èµ–è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœæ²¡æœ‰åˆ™é€šè¿‡package-lock.jsonè·å–ç›¸åº”ç‰ˆæœ¬å·ä¸‹è½½å®‰è£….å¦‚æœå·²ç»å­˜åœ¨åˆ™ä¼šé€šè¿‡package-lock.jsonæ£€æŸ¥æ›´æ–°ã€‚

* è¿›è¡Œ**æ›´æ–°**çš„åŸåˆ™å°±æ˜¯å…¶èŒƒå›´æ˜¯åœ¨package.jsonä¸­å¯¹åº”å®‰è£…åŒ…ç‰ˆæœ¬æ‰€å®¹çº³çš„ç‰ˆæœ¬ã€‚\^å°±æ˜¯æŒ‡å…¼å®¹è¯¥ç‰ˆæœ¬ä»¥åçš„å°ç‰ˆæœ¬è€Œä¸æ›´æ–°å¤§ç‰ˆæœ¬ï¼Œå¦‚ä¸Šå›¾package.jsonæ‰€ç¤ºï¼Œ"vue":"\^2.5.2"ä¹Ÿå°±æ˜¯æŒ‡èŒƒå›´åº”è¯¥åœ¨>=2.5.2å’Œ<3.0.0ä¹‹é—´(tips:ç½‘ä¸Šå¤§å¤šæ•°å¸–å­è¯´çš„æ¯”è¾ƒç¬¼ç»Ÿï¼Œè€Œå‚è€ƒå…¶ä¸­çš„ä¸€ç¯‡å¸–å­å¤§è‡´å°±æ˜¯ï¼Œ\^ä¼šå¿½è§†ç‰ˆæœ¬å·å¼€å¤´ä¸º0çš„æ•°å­—ï¼Œä¹Ÿå°±æ˜¯è¯´"axios":"0.19.0"çš„èŒƒå›´åº”è¯¥åœ¨>=0.19.0å’Œ<0.20.0ä¹‹é—´)

## ä¸Šä¼ åˆ°npmä¸€ä¸ªè‡ªå·±çš„åŒ…

è®©åˆ«äººå¯ä»¥é€šè¿‡`npm install xxx`å¯ä»¥å®‰è£…ä½ çš„åŒ…

1.  npmä¸­æ–°å»ºä¸€ä¸ªè´¦æˆ·

```shell
https://www.npmjs.com
```

2.  æ–°å»ºä¸€ä¸ªé¡¹ç›®

```shell
$ npm init || cnpm init
```

3.  åœ¨è‡ªå·±ç”µè„‘ç™»å½•

```shell
$ npm login
# è¾“å…¥: userName + é‚®ç®± + å¯†ç 
# æç¤º: Logged in as <userName> on http://registry.npmjs.org/. æˆåŠŸ
```

4.  ä¸Šä¼ 

`package.json` ä¸­çš„é¡¹ç›®åä¸èƒ½é‡å

```shell
npm publish
æˆåŠŸå: + åŒ…å@1.0.0
```

