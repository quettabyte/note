## sudo授权

### 一、sudo授权

```
作用: 为普通用户授权，让普通用户可以执行特权命令 

配置文件: /etc/sudoers

使用命令visudo编辑该文件，方便语法检测 
```

#### 1、授权语法

```
Syntax:
  user    MACHINE=COMMANDS
```

#### 2、针对单个用户授权

```
martin  ALL=/usr/bin/chmod,/usr/sbin/fdisk /dev/sdb
```

```
1、普通用户首次命令时，默认需要经过密码认证
2、sudo 命令 
3、记录日志   /var/log/secure 
```

```
[root@rabbit01 ~]# grep "martin" /var/log/secure 

Mar 26 15:59:22 rabbit01 sudo:  martin : TTY=pts/0 ; PWD=/home/martin ; USER=root ; COMMAND=/bin/chmod 644 /etc/fstab
Mar 26 15:59:26 rabbit01 sudo:  martin : TTY=pts/0 ; PWD=/home/martin ; USER=root ; COMMAND=/bin/chmod 644 /etc/fstab

```

```
martin  ALL=ALL,!/usr/bin/rm
```

```
robin   ALL=NOPASSWD:ALL,!/usr/bin/rm
```

#### 3、针对用户组授权

```
语法: 

	%用户组名	MACHINE=COMMANDS
```

```
robin   ALL=NOPASSWD:ALL,!/usr/bin/rm
```

```
建议取消wheel组的授权
```

#### 4、通过别名授权

```
Cmnd_Alias NETWORKING = /sbin/route, /sbin/ifconfig, /bin/ping, /sbin/dhclient, /usr/bin/net, /sbin/iptables, /usr/bin/rfcomm, /usr/bin/wvdial, /sbin/iwconfig, /sbin/mii-tool

martin  ALL=NETWORKING

```

