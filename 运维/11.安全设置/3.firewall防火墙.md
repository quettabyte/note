## firewall防火墙

### 一、firewall防火墙

```
依赖于firewalld服务正常运行 
	两个配置工具:
		firewall-cmd	命令行工具
		firewall-config	图形化工具
```

#### 1、数据过滤

##### 1、查看所有区域

```
[root@node01 ~]# firewall-cmd --get-zones 
block dmz drop external home internal public trusted work

	public：默认区域
	trusted：允许所有服务访问
	drop：拒绝所有访问
```

##### 2、查看默认区域

```
[root@node01 ~]# firewall-cmd --get-default-zone 
public
```

##### 4、查看区域详细信息

```
[root@node01 ~]# firewall-cmd --list-all --zone=public 
public (active)
  target: default
  icmp-block-inversion: no
  interfaces: ens33
  sources: 
  services: ssh dhcpv6-client
  ports: 
  protocols: 
  masquerade: no
  forward-ports: 
  source-ports: 
  icmp-blocks: 
  rich rules: 
```

##### 5、放行服务

```
[root@node01 ~]# firewall-cmd --permanent --add-service=http --zone=public 
success
[root@node01 ~]# firewall-cmd --reload 
success

```

```
[root@node01 ~]# firewall-cmd --permanent --add-service=ftp --zone=public 
success
[root@node01 ~]# firewall-cmd --reload 
```

```
[root@node01 ~]# firewall-cmd --permanent --add-port=3306/tcp --zone=public 
success
[root@node01 ~]# firewall-cmd --reload 
```

##### 6、拒绝服务访问

```
--remove-service=
--remove-port=
```

##### 7、拒绝icmp数据

```
[root@node01 ~]# firewall-cmd --permanent --add-icmp-block=echo-request --zone=public 
success
[root@node01 ~]# firewall-cmd --reload 
```



#### 2、NAT地址转换

##### 1) SNAT

```
[root@nat_device ~]# firewall-cmd --permanent --add-masquerade --zone=public 
success
[root@nat_device ~]# firewall-cmd --reload 
success
```

##### 2) DNAT/端口转发

```
[root@nat_device ~]# firewall-cmd --permanent --add-forward-port=port=80:proto=tcp:toport=80:toaddr=172.16.10.1 --zone=public 
success
[root@nat_device ~]# firewall-cmd --reload 

```

```
[root@nat_device ~]# firewall-cmd --permanent --add-forward-port=port=33333:proto=tcp:toport=22:toaddr=172.16.10.1 --zone=public 
success
[root@nat_device ~]# firewall-cmd --reload 
```



















