## lamp平台的应用 

### 一、lamp介绍

```
网站: 
	静态
	动态
		php语言	.php
		
作用: 运行php语言编写动态网站应用 

lamp = Linux + Apache + MySQL + PHP

php是作为httpd的一个功能模块存在的 

[root@web_server ~]# ls /etc/httpd/modules/
libphp5.so
```



###  二、部署lamp平台 

```
[root@web_server ~]# yum install -y httpd php mariadb-server php-mysql gd php-gd 

[root@web_server ~]# vim /etc/httpd/conf/httpd.conf 

<IfModule dir_module>
    DirectoryIndex index.php index.html
</IfModule>

[root@web_server ~]# systemctl start httpd mariadb
[root@web_server ~]# systemctl enable httpd mariadb

[root@web_server ~]# netstat -antp | grep -E "80|3306"
tcp        0      0 0.0.0.0:3306            0.0.0.0:*               LISTEN      1601/mysqld         
tcp6       0      0 :::80                   :::*                    LISTEN      1353/httpd     
```



#### 1、测试httpd是否可正常返回php的响应 

```
[root@web_server ~]# cat /var/www/html/test1.php

<?php
  phpinfo();
?>

http://192.168.183.10/test1.php
```



#### 2、测试php代码是否可正常连接数据库 

```
[root@web_server ~]# cat /var/www/html/test2.php

<?php
    $link=mysql_connect("localhost", "root", "");
    if ($link)
        echo "Ok!!!!";
    else
        echo "Error!!!!";
    mysql_close();
?>

http://192.168.183.10/test2.php
```





### 三、部署wordpress 

#### 1、创建wordpress虚拟主机 

```
[root@web_server ~]# mkdir /wordpress

[root@web_server ~]# vim /etc/httpd/conf.d/wordpress.conf
<VirtualHost 192.168.183.10:80>
      ServerName wp.linux.com
      DocumentRoot /wordpress
      ErrorLog /var/log/httpd/wp_error.log
      CustomLog /var/log/httpd/wp_access.log combined
</VirtualHost>

<Directory "/wordpress">
    Require all granted
</Directory>

[root@web_server ~]# httpd -t
Syntax OK
```



#### 2、下载wordpress安装包，将相关文件放到对应的网站目录 

```
[root@web_server ~]# tar xf wordpress-4.6.10.tar.gz 
[root@web_server ~]# cp -r wordpress/* /wordpress/

[root@web_server ~]# ls /wordpress/
index.php    readme.html      wp-admin            wp-comments-post.php  wp-content   wp-includes        wp-load.php   wp-mail.php      wp-signup.php     xmlrpc.php
license.txt  wp-activate.php  wp-blog-header.php  wp-config-sample.php  wp-cron.php  wp-links-opml.php  wp-login.php  wp-settings.php  wp-trackback.php

[root@web_server ~]# rm -rf /etc/httpd/conf.d/welcome.conf 
[root@web_server ~]# systemctl restart httpd

访问wordpress的安装界面 
http://wp.linux.com
```



#### 3、创建wordpress需要的数据库， 授权用户

```
MariaDB [(none)]> create database wordpress charset utf8;
Query OK, 1 row affected (0.00 sec)

MariaDB [(none)]> grant all on wordpress.* to 'wpuser'@'localhost' identified by 'redhat';
Query OK, 0 rows affected (0.00 sec)

MariaDB [(none)]> flush privileges;
Query OK, 0 rows affected (0.01 sec)
```



#### 4、创建保存数据库信息的配置文件

```
[root@web_server ~]# ls -l /wordpress/wp-config.php
```





### 四、部署phpMyAdmin        MySQL图形化管理工具 

#### 1、创建虚拟主机 

```
[root@web_server ~]# mkdir /pma
[root@web_server ~]# vim /etc/httpd/conf.d/pma.conf
<VirtualHost 192.168.183.10:80>
      ServerName pma.linux.com
      DocumentRoot /pma
      ErrorLog /var/log/httpd/pma_error.log
      CustomLog /var/log/httpd/pma_access.log combined
</VirtualHost>

<Directory "/pma">
    Require ip 192.168.183.1
</Directory>

[root@web_server ~]# httpd -t
Syntax OK
```



#### 2、部署phpMyAdmin 

```
[root@web_server ~]# tar xf phpMyAdmin-3.3.10-all-languages.tar.gz 
[root@web_server ~]# cp -r phpMyAdmin-3.3.10-all-languages/* /pma/

[root@web_server ~]# systemctl restart httpd
```



#### 3、访问

```
http://pma.linux.com/
```





























