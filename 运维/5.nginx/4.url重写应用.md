## url重写应用

### 一、url重写介绍

```
语法: 

rewrite uri地址  新uri地址 [标志]; 

注意事项: 

1、server, location, if 
2、rewrite可以存在多条, 依次进行处理 
3、旧uri地址支持正则表达式; 新uri支持反向引用
4、旧uri地址匹配客户端时，不包括请求中的参数 
5、支持变量的使用
```

#### 1、标志 flag 

```
1) last
	终止本location块中的匹配，将新地址转交给下一个location

2) break
	不会将新地址交给其他的location处理，只在本location中处理 
	
3) redirect
	临时重定向, 状态码302

4) permanet
	永久重定向, 状态码301
```



##### 案例1: 改写地址中的目录名称 

```
rewrite ^/mp3 http://python.linux.com/music;
```

```
rewrite ^/mp3/(.*)  http://python.linux.com/music/$1;
```



##### 案例2: 域名跳转

```
rewrite ^/  https://www.baidu.com;
```



##### 案例3: 实现https的自动跳转 

```
   location / {
      root /data/python;
      index index.html;
      if ($host = www.linux.com) {
          rewrite ^/(.*)  https://www.linux.com/$1;
      }
   }
```









































