## 面向对象编程语法 

### 一、面向对象基本概念

#### 1、对象  object

#### 2、类	class

```
优势: 
	1、方便功能重用
	2、保证数据安全性
```

```
属性[变量]、方法[函数]
```



#### 二、创建类 

```
class 类名称():
	属性
	属性
	
	方法
	方法
	
类名的规范:
	1、首字母大写		
```

```
# 创建Test1类
class Test1():
    name = "Martin"
    age = 37

    def learn(self):
        print("热爱学习!")

    def driver(self):
        print("驾驶汽车")

if __name__ == '__main__':
    # 创建对象 p1, 实例化
    p1 = Test1()
    print(p1.name)
    p1.learn()
    p1.driver()

    p2 = Test1()
    p2.learn()
```

##### 类中相互调用数据

```
class Test1():
    ip = "10.1.1.1"
    username = "admin"

    def sshCONN(self):
        print("ssh %s@%s" % (self.ip, self.username))

    def getCPU(self):
        self.sshCONN()
        print("获取CPU型号")

if __name__ == '__main__':
    p1 = Test1()
    p1.sshCONN()
    p1.getCPU()
```



### 二、私有属性、方法

#### 1、私有属性

```
语法:
	__属性名称 	
	在属性名称前加两个下划线
	
特性：
	只有在类内部可调用，适用保存隐密数据  
```

```
class Test1():
    ip = "10.1.1.1"
    username = "admin"
    __password = "redhat"

    def sshCONN(self):
        print("ssh %s@%s -p %s" % (self.ip, self.username, self.__password))
```



#### 2、私有方法

```
语法:
	__方法名称
	在方法名称前加两个下划线 
```

```
class Test1():
    ip = "10.1.1.1"
    username = "admin"
    __password = "redhat"

    def __sshCONN(self):
        print("ssh %s@%s -p %s" % (self.ip, self.username, self.__password))

    def getCPU(self):
        self.__sshCONN()
        print("获取CPU型号")

if __name__ == '__main__':
    p1 = Test1()
    p1.getCPU()
```



### 三、构造方法/函数

```
1、方法名称固定的
	def __init__():
		.....
2、在类进行实例化时，会自动执行
```

```
class Test1():
    def __init__(self, ip, username):
        self.ip = ip
        self.username = username

    def sshCONN(self):
        print("ssh %s@%s" % (self.username, self.ip))

if __name__ == '__main__':
    p1 = Test1(ip="172.16.1.1", username="admin")
    p1.sshCONN()

    p2 = Test1(ip="192.168.1.1", username="martin")
    p2.sshCONN()
```



### 四、继承关系 

#### 1、创建子类

```
父类
子类
	会自动继承父类中所有的数据
```

```
class Test1():
    username = "admin"

    def dbCONN(self):
        print("连接MySQL数据库")

    def userLogin(self):
        print("用户登录功能")


class Test2(Test1):
    pass

if __name__ == '__main__':
    p1 = Test2()
    print(p1.username)

    p1.dbCONN()
    p1.userLogin()
```

#### 2、方法重写

```
class Test1():
    username = "admin"

    def dbCONN(self):
        print("连接MySQL数据库")

    def userLogin(self):
        print("用户登录功能")


class Test2(Test1):
    def dbCONN(self):
        print("基于SSL协议连接数据库")



if __name__ == '__main__':
    p1 = Test2()
    p1.dbCONN()

    p2 = Test1()
    p2.dbCONN()

```



#### 案例： 采集服务器硬件信息

```
import paramiko
import sys

class ServerHWInfo():
    def __init__(self, ip, user, pwd, port=22):
        self.ip = ip
        self.user = user
        self.pwd = pwd
        self.port = port

    def __sshCONN(self):
        ssh_client = paramiko.SSHClient()
        ssh_client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
        try:
            ssh_client.connect(hostname=self.ip, username=self.user, password=self.pwd, port=self.port)
        except Exception as e:
            print("服务器%s SSH连接建立失败!" % self.ip)
            print(e)
            sys.exit()
        return ssh_client

    # 采集操作系统版本
    def getOSVersion(self):
        ssh_client = self.__sshCONN()
        stdin, stdout, stderr = ssh_client.exec_command("cat /etc/redhat-release")
        os_version = stdout.read().decode(encoding="utf-8")
        print(os_version)
        ssh_client.close()

    # 采集内核版本
    def getKernelVersion(self):
        ssh_client = self.__sshCONN()
        stdin, stdout, stderr = ssh_client.exec_command("uname -r")
        kernel_version = stdout.read().decode(encoding="utf-8")
        print(kernel_version)
        ssh_client.close()

    # 采用服务器CPU型号
    def getCPU(self):
        ssh_client = self.__sshCONN()
        stdin, stdout, stderr = ssh_client.exec_command("cat /proc/cpuinfo | awk -F: '/model name/{print $2}'")
        cpu_model = stdout.read().decode(encoding="utf-8")
        print(cpu_model)
        ssh_client.close()

    # 采集内存总大小
    def getMemoryTotalSize(self):
        ssh_client = self.__sshCONN()
        stdin, stdout, stderr = ssh_client.exec_command("free -m | awk '/Mem:/{print $2}'")
        memory_size = stdout.read().decode(encoding="utf-8")
        print("%sMB" % memory_size.rstrip("\n"))
        ssh_client.close()


if __name__ == '__main__':
    p1 = ServerHWInfo(ip="192.168.140.10", user="root", pwd="redhat", port=22)
    p1.getMemoryTotalSize()
```























