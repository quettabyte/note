## Django介绍及基本使用

### 一、Django介绍

```
基于python开发的web框架

作用: 便于web应用的开发 
```

#### 1、基于MTV模型设计

```
Model		模型
Template	模板
View		视图函数

作用：实现代码的松耦合
```

#### 2、Django版本

```
1.x
2.x
3.x
```



### 二、Django安装及启动

#### 1、Django安装

```
(project1207_venv) D:\>pip install django==3.2

(project1207_venv) D:\>python
Python 3.8.6 (tags/v3.8.6:db45529, Sep 23 2020, 15:52:53) [MSC v.1927 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>>
>>> import django
>>> django.get_version()
'3.2'
>>>
>>> exit()
```



#### 2、创建django项目 

```
格式:

> django-admin startproject 项目名称 
```

```
(project1207_venv) D:\20201207>django-admin startproject django01
```



#### 3、启动、停止django项目

##### 1) 启动项目

```
> python manage.py runserver

默认启动在127.0.0.1:8000
```

##### 2）修改项目启动地址

```
(project1207_venv) D:\20201207\django01>python manage.py runserver 10.10.11.240:8000
```

##### settings.py配置文件

```
# 允许客户端通过所有地址访问项目

ALLOWED_HOSTS = ["*",]
```



##### 3) 停止项目

```
ctrl + c 
```



### 三、Django项目文件介绍

```
django01
    django01					# 项目同名的包
    	__init__.py				# 用于标识包的文件
    	asgi.py					# 用于实现异步处理客户端请求的文件
    	wsgi.py					# 配合nginx部署django项目时的文件
    	settings.py				# 配置文件
    	urls.py					# 路由文件，匹配客户端请求，以不同的方式处理客户端请求
    	
    db.sqlite3					  # django项目默认使用的sqlite数据库的数据文件
    manage.py					、# 管理脚本 
```



### 四、url定义的语法 

```
urls.py 

path('url地址', 视图函数名称)
```

#### 1、视图函数	view

```
作用: 处理客户端请求， 返回http响应数据

本质上就是python函数

具备两个特性:
	1、必须要设置一个参数, 参数名称为request
	2、返回HTTP响应数据
```

#### 2、简单应用

##### django01/views.py

```
from django.http import HttpResponse

# 显示hello world
def test1(request):
    print("第一个例子")
    return HttpResponse("Hello world!!!!!!")

# 显示hello django
def test2(request):
    return HttpResponse("Hello django")

# 显示用户登录界面
def test3(request):
    data = """
        <html>
        <head>
            <title>用户登录</title>
        </head>
        
        <body>
            <h2>用户登录</h2>
            <span>用户名: </span>
            <input type="text" />
            <span>密码：</span>
            <input type="password" />
            <input type="submit" value="登录" />
        </body>
    </html>
    """
    return HttpResponse(data)
```

##### django01/urls.py

```
from django.contrib import admin
from django.urls import path
from django01 import views

urlpatterns = [
    path('admin/', admin.site.urls),
    path('test1/', views.test1),
    path('test2/', views.test2),
    path('test3/', views.test3),
]
```



### 五、返回HTTP响应数据的三种方式

### 1、HttpRespone("字符串")

```
from django.http import HttpResponse


def test4(request):
    return HttpResponse("Test4")
```

#### 2、redirect("url地址")

```
跳转、重写向
```

```
from django.shortcuts import redirect

# 跳转到 baidu
def test5(request):
    return redirect("https://www.baidu.com")
```

#### 3、render(request, template_name)

```
自动打开对应的html文件， 获取页面内容，返回给客户端 
```

##### 1) 在项目目录创建templates目录，用于存放HTML模板 

##### 2) settings.py配置模板路径 

```
import os
TEMPLATES = [
    {
        'DIRS': [
            os.path.join(BASE_DIR, "templates"),
        ],
```

##### 3) render()方法使用   django01/views.py

```
from django.http import HttpResponse
from django.shortcuts import redirect, render

# 展示server.html页面
def test6(request):
    return render(request, "server.html")
```

##### 4）templates/server.html

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>服务器信息</title>
</head>
<body>

    <table border="1px">
        <tr>
            <td>编号</td>
            <td>服务器地址</td>
            <td>服务器型号</td>
            <td>操作系统</td>
        </tr>
        <tr>
            <td>1</td>
            <td>10.1.1.1</td>
            <td>vmware</td>
            <td>Centos</td>
        </tr>
        <tr>
            <td>2</td>
            <td>10.1.1.2</td>
            <td>vmware</td>
            <td>Centos</td>
        </tr>
        <tr>
            <td>3</td>
            <td>10.1.1.3</td>
            <td>vmware</td>
            <td>Centos</td>
        </tr>
    </table>

</body>
</html>
```



























