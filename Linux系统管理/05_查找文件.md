## 1. grep 过滤文件内容

作用：从文件中搜索出符合条件的内容

```
格式
# grep [选项]	"pattern" 文件名称

pattern：条件
		由普通字符、正则表达式组成的条件
	
默认会显示符合条件的整行内容

[root@localhost ~]# grep "root" /etc/passwd
[root@localhost ~]# ifconfig ens33 | grep "netmask"
```

## 2. 正则表达式

由一类特殊字符组成的表达式。用于匹配一类具有相同特征的文本

### 匹配单个字符

```sh
	匹配任意单个字符：root、r/?t、rcdt
[root@localhost ~]# grep "r..t" /etc/passwd

	[bH]	或者b，或者H：abk、aHk
[root@localhost ~]# grep "a[bH]k" /etc/passwd

	[a-z]  任意单个小写字母：aak、abk、...azk
[root@localhost ~]# grep "a[a-z]k" /etc/passwd

	[A-Z]  任意单个大写字母：aAk、aBk、...aZk
[root@localhost ~]# grep "a[A-Z]k" /etc/passwd

	[0-9]	 任意数字：a0k、a1k、...a9k
[root@localhost ~]# grep "a[0-9]k" /etc/passwd

	[^a-z]	除了小写字母，其他任意字符
[root@localhost ~]# grep "a[^a-z]k" /etc/passwd

	[:space:]:单个空白字符（空格、Tab）
	[[:space:]a-z] 任意单个小写字母或者空白字符
```



### 匹配字符的出现次数

```sh
	*	前一个字符出现任意次（0次或者多次）:a、ak、akk、akkk...
[root@localhost ~]# grep "ak*" /tmp/file01

	\+ 前一个字符出现多次 （1次或者多次）:ak、akk、akkk...
[root@localhost ~]# grep "ak\+" /tmp/file01
[root@localhost ~]# grep "a[0-9]\+" /tmp/file01

	\? 前一个字符出现0次或者1次:a、ak
[root@localhost ~]# grep "ak\?" /tmp/file01

	\{3\}	前一个字符精确出现3次
	\{2,5\} 至少出现2次，最多出现5次
	\{2,\} 至少出现2次
[root@localhost ~]# grep "ak\{4\}" /tmp/file01

	分组\(ab\)	ab至少出现两次:abab
[root@localhost ~]# grep "\(ab\)\{2,\}" /tmp/file01
	eg:z4545y、z548421y、z1y
[root@localhost ~]# grep "z[0-9]\+y" /tmp/file01
```

### 匹配字符出现位置

```sh
	^string 	以string开头
[root@localhost ~]# grep "^root" /etc/passwd
[root@localhost ~]# grep "^[^sd]" /etc/passwd

	string$		以string结尾
[root@localhost ~]# grep "sh$" /etc/passwd

	^$	空行
[root@localhost ~]# grep "^$" /etc/passwd
```

### 邮箱正则表达式

```sh
[root@localhost ~]# grep "^[a-zA-Z0-9]\+@[a-z0-9]\+\.[a-z]\+" /tmp/file02
[root@localhost ~]# grep "^[a-zA-Z0-9]\+@[a-z0-9]\+\.[a-z]\+\(\.[a-z]\+\)\?" /tmp/file02
```

### IP地址正则表达式

```sh
[root@localhost ~]# grep "[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}\.[0-9]\{1,3\}" /tmp/file02
```

## 3. grep常用选项

1. `-o` 

只显示符合正则表达式的数据

```sh
[root@localhost ~]# grep -o "r..t" /etc/passwd
```

2. `-i` 

忽略大小写,error、ERROR、Error

```sh
[root@localhost ~]# grep -i "error" /etc/passwd
```

3. `-v`

反向过滤

```sh
[root@localhost ~]# grep -v "^#" /etc/fstab
```

4. `-e`

多条件过滤

```sh
[root@localhost ~]# grep -e "^#" -e "^/" /etc/fstab
[root@localhost ~]# grep -e "^#" -e "0$" /etc/fstab
```

5. `-E`

支持扩展正则表达式，省去转义字符

```sh
[root@localhost ~]# grep -E "^[a-zA-Z0-9]+@[a-z0-9]+\.[a-z]+" /tmp/file02
```

* 可以使用alias定义别名，或者使用`egrep`

```
alias grep='grep -E'
```


## 5. find 查找文件

```
# find  目录名称	搜索条件 [exec -命令 \;]
```



**1）按名称查找 `-name "" ` **

```sh
[root@localhost ~]# find /etc/ -name "*.conf"
```



**2）按文件大小查找 `-size`  **

```sh
[root@localhost ~]# find /etc/ -size +1M

[root@localhost ~]# find /etc/ -size -1M

[root@localhost ~]# find /etc/ -size +400K
```



**3)按文件修改时间查找 `-mtime` **

```sh
[root@localhost ~]# find /etc/ -mtime -3 三天内

[root@localhost ~]# find /etc/ -mtime +3 三天前
```



**4）按文件创建时间查找 `-ctime`**

```sh
[root@localhost ~]# find /etc/ -ctime -7

[root@localhost ~]# find /etc/ -ctime +7
```



**5）指定搜索目录层次`-maxdepth n`**

```sh
[root@localhost ~]# find /etc/ -maxdepth 2 -name "*.txt"
```



**6）多条件查找**

```sh
and 并且

[root@localhost ~]# find /etc/ -name "*.conf" -a -size +50K

or 或者

[root@localhost ~]# find /etc/ -name "*.txt" -o -name "*.html"
```



**7）对查找的文件执行处理操作**

 ```sh
 [root@localhost ~]# find /opt/testdir/ -name "*.jpg" -exec rm -rf {}\;
 [root@localhost ~]# find /etc/ -size +2M -exec ls -lh {}\;
 [root@localhost ~]# find /etc/ -size +2M -exec cp {} /tmp/ \;
 ```

## 6.uniq去重

```
# uniq 文件名称

[root@localhost ~]# uniq /tmp/file04
```

## 7.sort排序

```
# sort [选项] 文件名称

[root@localhost ~]# sort -n -k 2 -t ":" -r /tmp/b.txt

		-n			按数字处理
		-k 2 		按每行的第2列的数据进行排序，默认使用空白字符分割每一行
		-t			用于指定分隔符
		-r			降序、默认是升序
		 
[root@localhost ~]# sort /tmp/file04 | uniq

[root@localhost ~]# du -a /etc/ | sort -n -k 1
[root@localhost ~]# du -a /etc/ | sort -n -k 1 -r | less
```











