## 一、常规权限

`r`		读取

`w`		写入

`x`		执行



```
针对文件
	1. r		只能查看文件内容（cat/more/less/head/tail/grep）	
	2. w		修改文件内容（vim）
	3. x		针对shell，python脚本文件
```



```
针对目录表示含义
	1. r		只能查看目录下的文件（ls 目录名称）
	2. w		修改该目录下的文件（touch，mv，rm，cp）
	3. x		可切换进该目录（cd 目录名称）
```



```
查看文件权限
[rootalocalhost]# 1s -1 /etc/fstab
-rw-r--r--. 1 root root 465 Dec 15 16:40 /etc/fstab

		九位权限，三位一组
				第一组：属主用户对文件的操作权限
				第二组：属组对文件的操作权限
				第三组：其他用户
				
				
查看目录的权限
[rootalocalhost]# 1s -1d /etc/
drwxr-xr-x. 142 root root 8192 Dec 21 17:11 /etc/
```



## 二、修改权限的常用命令

### chown修改属主、属组

```
# chown	用户名.用户组名 文件名称

[root@localhost ~]# chown martin.caiwu /opt/test/1.txt

[root@localhost ~]# chown martin /opt/test/2.txt

选项
-G	————	所有子文件子目录的权限都修改（递归修改）
```

### 2. chgrp修改属组

```
# chgrp 用户组名 文件名称

[root@localhost ~]# chgrp jishu /opt/test/4.txt
```



### 3. chmod修改权限位

```
# chmod (augo)(+-=)(rwx) 文件名称
		u:	属主用户
		g:	属组
		o:	其他用户
		a:	全部用户
		
# chmod u+x /opt/test/1.jpg
# chmod g-r,o-r	/opt/test/2.jpg
# chmod a+x /opt/test/2.jpg

# chmod nnn 文件名称
# chmod 600 /opt/test/4.jpg		rw- --- ---
# chmod 642 /opt/test/5.jpg		rw- r-- -w-
```



## 三、facl 文件访问控制列表

​	优势：

​			针对单个用户、用户组设置



```
针对单个用户设置
# setfacl -m u:用户名:权限		文件名称

# setfacl -m u:userD:rwx /opt/test/file03

# getfacl /opt/test/file03

针对单个用户组设置
# setfacl -m g:用户组:权限		文件名称

删除facl权限
# setfacl -x u:userD	/opt/test/file03
```



## 四、特殊权限

​	`suid`、`sgid`、`sticky bit`

### 1. suid

​		针对可执行文件设置

​		当普通用户运行文件期间，会临时获取到该文件属主对操作系统的操作权限

```
[root@localhost ~]# chmod u+s /usr/bin/passwd

[root@localhost ~]# ls -l /usr/bin/passwd
-rwsr-xr-x. 1 root root 27832 Jun 10  2014 /usr/bin/passwd
```

### 2. sgid

​		针对目录设置

​		目录拥有sgid权限后，在该目录创建的文件会自动继承目录的属组

```
[root@localhost ~]# chmod g+s /opt/testdir

[root@localhost ~]# ls -ldh /opt/testdir
drwxr-sr-x. 2 root root 6 Mar 11 16:53 /opt/testdir/
```

### 3. syicky bit

​		针对目录设置

​		作用：

​				防止普通用户在目录下互删

​				只有文件属主、目录属主、root用户可删除该目录下的文件

```
[root@localhost ~]# chmod o+t /opt/bj

[root@localhost ~]# ls -ldh /opt/bj
drwxr-xr-t. 2 root root 6 Mar 11 16:56 /opt/bj
```



## 五、文件属性



### 1. 查看文件属性

```
[root@localhost ~]# lsattr /etc/fstab
---------------- /etc/fstab
```



### 2. 设置文件属性

```
# chattr +属性名称	文件名称

常用属性：
1) i	文件内容不允许修改，不允许删除

[root@localhost ~]# chattr +i /opt/file01
[root@localhost ~]# lsattr /opt/file01
----i----------- /etc/file01

2) a	仅允许像文件追加内容，不允许删除
[root@localhost ~]# rm -rf /opt/file02
rm: cannot remove ‘/opt/file02’: Operation not permitted

[root@localhost ~]# echo "abc" >> /opt/file02
[root@localhost ~]# echo "kkkk" >> /opt/file02
```



## 六、umask

​		权限的反掩码

​		影响用户创建出的文件或者目录的初始权限

```
// 管理员默认0022，普通用户默认0002
[root@localhost ~]# umask
0022

// 修改umask值
[root@localhost ~]# umask 0000
```









