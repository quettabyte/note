## ç»„ä»¶å±žæ€§ refsðŸ“š

ä¸‹é¢æ˜¯å‡ ä¸ªé€‚åˆä½¿ç”¨ refs çš„æƒ…å†µï¼š

* ç®¡ç†ç„¦ç‚¹ï¼Œæ–‡æœ¬ðŸ“„é€‰æ‹©æˆ–åª’ä½“ðŸŽµæ’­æ”¾ã€‚
* è§¦å‘å¼ºåˆ¶åŠ¨ç”»åŠ¨ç”»ã€‚
* é›†æˆç¬¬ä¸‰æ–¹ DOM åº“ã€‚

### createRef API æ–¹æ³•

æœ€æ–°çš„å®˜æ–¹æŽ¨èä½¿ç”¨çš„æ–¹æ³•âœ…ï¼ˆ ç‰ˆæœ¬ â‰¥ v16.3ï¼‰

```jsx
myRef = React.createRef();
eventFunc = () => {
    console.log(this.myRef.current.value);
}
<input ref={this.myRef}  />
```

React.createRefè°ƒç”¨åŽå¯ä»¥è¿”å›žä¸€ä¸ªå®¹å™¨ï¼Œè¯¥å®¹å™¨å¯ä»¥å­˜å‚¨è¢«refæ‰€æ ‡è¯†çš„èŠ‚ç‚¹

ä¸€ä¸ªå®¹å™¨åªèƒ½ç»‘å®šä¸€ä¸ªèŠ‚ç‚¹

refçš„å€¼æ ¹æ®èŠ‚ç‚¹çš„ç±»åž‹è€Œæœ‰æ‰€ä¸åŒï¼š

* å½“ `ref` å±žæ€§ç”¨äºŽ HTML å…ƒç´ æ—¶ï¼Œæž„é€ å‡½æ•°ä¸­ä½¿ç”¨ `React.createRef()` åˆ›å»ºçš„ `ref` æŽ¥æ”¶åº•å±‚ DOM å…ƒç´ ä½œä¸ºå…¶ `current` å±žæ€§ã€‚
* å½“ `ref` å±žæ€§ç”¨äºŽè‡ªå®šä¹‰ class ç»„ä»¶æ—¶ï¼Œ`ref` å¯¹è±¡æŽ¥æ”¶ç»„ä»¶çš„æŒ‚è½½å®žä¾‹ä½œä¸ºå…¶ `current` å±žæ€§ã€‚
* **ä½ ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šä½¿ç”¨ `ref` å±žæ€§**ï¼Œå› ä¸ºä»–ä»¬æ²¡æœ‰å®žä¾‹ã€‚
* å¦‚æžœè¦åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ `ref`ï¼Œä½ å¯ä»¥ä½¿ç”¨ [`forwardRef`](https://zh-hans.reactjs.org/docs/forwarding-refs.html)ï¼ˆå¯ä¸Ž [`useImperativeHandle`](https://zh-hans.reactjs.org/docs/hooks-reference.html#useimperativehandle) ç»“åˆä½¿ç”¨ï¼‰ï¼Œæˆ–è€…å¯ä»¥å°†è¯¥ç»„ä»¶è½¬åŒ–ä¸º class ç»„ä»¶ã€‚

### å›žè°ƒrefs

```jsx
eventFunc = () => {
    console.log(this.myinput.value);
}
<input ref={(c) => this.myinput = c} type="text"/>
```

å­˜åœ¨ä¸€ä¸ªæ— å…³ç´§è¦çš„é—®é¢˜çš„ðŸ””

> âœ…å®˜ç½‘æè¿°
>
> å¦‚æžœ `ref` å›žè°ƒå‡½æ•°æ˜¯ä»¥å†…è”å‡½æ•°çš„æ–¹å¼å®šä¹‰çš„ï¼Œåœ¨æ›´æ–°è¿‡ç¨‹ä¸­å®ƒä¼šè¢«æ‰§è¡Œä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡ä¼ å…¥å‚æ•° `null`ï¼Œç„¶åŽç¬¬äºŒæ¬¡ä¼šä¼ å…¥å‚æ•° DOM å…ƒç´ ã€‚è¿™æ˜¯å› ä¸ºåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°å®žä¾‹ï¼Œæ‰€ä»¥ React æ¸…ç©ºæ—§çš„ ref å¹¶ä¸”è®¾ç½®æ–°çš„ã€‚é€šè¿‡å°† ref çš„å›žè°ƒå‡½æ•°å®šä¹‰æˆ class çš„ç»‘å®šå‡½æ•°çš„æ–¹å¼å¯ä»¥é¿å…ä¸Šè¿°é—®é¢˜ï¼Œä½†æ˜¯å¤§å¤šæ•°æƒ…å†µä¸‹å®ƒæ˜¯æ— å…³ç´§è¦çš„ã€‚

å°†refçš„å›žè°ƒå‡½æ•°å®šä¹‰æˆclassçš„ç»‘å®šå‡½æ•°çš„æ–¹å¼ï¼š

```jsx
saveInput = (c) => {
    this.myinput = c;
}
<input ref = {this.saveInput} type="text"/>
```

### å­—ç¬¦ä¸²å½¢å¼refs

è¿‡æ—¶å¹¶å¯èƒ½ä¼šåœ¨æœªæ¥ç‰ˆæœ¬ä¸­ç§»é™¤âŽ

```jsx
eventFunc = () => {
    const {myinput} = this.refs;
    console.log(myinput.value);
}
<input ref="myinput" onBlur={this.showData} type="text" placeholder="å¤±åŽ»ç„¦ç‚¹æç¤ºæ•°æ®"/>
```



